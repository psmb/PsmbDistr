root.sermonJson {
  condition = ${request.arguments.sermon}
  renderer = Neos.Fusion:Http.Message {
    httpResponseHead {
      headers.Content-Type = 'application/json;charset=utf-8'
      headers.Access-Control-Allow-Origin = '*'
    }
    content = Sfi.Site:SermonJsonRenderer
  }
}
root.@cache.entryIdentifier.sermon = ${request.arguments.sermon}

prototype(Sfi.Site:SermonJsonRenderer) < prototype(Sfi.Site:SermonJson) {
  @context.node = ${q(site).find('#' + request.arguments.sermon).get(0)}
  @process.1 = ${Json.stringify(value)}

  @cache {
    mode = 'cached'
    entryIdentifier {
       node = ${node}
    }
    entryTags {
      1 = ${Neos.Caching.nodeTypeTag('Sfi.Site:Sermon')}
    }
  }
}