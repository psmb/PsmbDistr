
# Define Aloha presets to reuse throughout the document
blah: &alohaPlain
  placeholder: 'Enter title here'
  format:
    b: false
    i: false
    u: false
    sub: false
    sup: false
    p: false
    h1: false
    h2: false
    h3: false
    pre: false
    removeFormat: false
  table: {  }
  list: {  }
  link:
    a: false
  alignment: {  }

blah: &alohaRich
  placeholder: 'Enter title here'
  format:
    b: true
    i: true
    u: false
    sub: true
    sup: true
    p: false
    h1: false
    h2: false
    h3: false
    pre: false
    removeFormat: false
  table: {  }
  list: {  }
  link:
    a: true
  alignment: {  }

'TYPO3.Neos.NodeTypes:Page':
  abstract: TRUE

'Sfi.Site:Page':
  superTypes:
    'TYPO3.Neos:Document': true
  ui:
    label: 'Обычная страница'

'Sfi.Site:Tag':
  superTypes:
    'TYPO3.Neos:Document': true
    'Psmb.Term:TermMixin': true
  ui:
    label: 'Категория'
  properties:
    originalIdentifier:
      type: string

'Sfi.Site:News':
  superTypes:
    - 'TYPO3.Neos:Document'
  ui:
    label: 'Материал'
    inspector:
      groups:
        news:
          label: 'Атрибуты материала'
        newsRelations:
          label: 'Отношения материала'
  childNodes:
    cover:
      type: 'TYPO3.Neos:ContentCollection'
    main:
      type: 'TYPO3.Neos:ContentCollection'
    gallery:
      type: 'TYPO3.Neos:ContentCollection'
  properties:
    title:
      ui:
        inlineEditable: true
        aloha:
          <<: *alohaPlain
          placeholder: 'Заголовок материала'
    teaser:
      type: string
      ui:
        inlineEditable: true
        aloha:
          <<: *alohaRich
          placeholder: 'Тизер'
    announcementPlace:
      type: string
      ui:
        inlineEditable: true
        aloha:
          <<: *alohaRich
          placeholder: 'Город для анонса (не используется)'
    credit:
      type: string
      ui:
        label: 'Авторство'
        inlineEditable: true
        aloha:
          <<: *alohaPlain
          placeholder: 'Авторство'
    date:
      type: DateTime
      defaultValue: 'now'
      ui:
        label: 'Дата'
        reloadIfChanged: true
        inspector:
          group: news
          editorOptions:
            format: 'd-m-Y H:i'
      validation:
        'TYPO3.Neos/Validation/DateTimeValidator': []
      search:
        elasticSearchMapping:
          type: date
          include_in_all: false
          format: 'date_time_no_millis'
        indexing: '${(value ? Date.format(value, "Y-m-d\TH:i:sP") : null)}'
    isImportant:
      type: boolean
      ui:
        label: 'Важный материал'
        inspector:
          group: news
    isYandex:
      type: boolean
      ui:
        label: 'Яндекс новости'
        inspector:
          group: news
    isPhoto:
      type: boolean
      ui:
        label: 'Фото'
        inspector:
          group: news
    isVideo:
      type: boolean
      ui:
        label: 'Видео'
        inspector:
          group: news
    isAudio:
      type: boolean
      ui:
        label: 'Аудио'
        inspector:
          group: news
    thumbImage:
      type: TYPO3\Media\Domain\Model\ImageInterface
      ui:
        label: 'Фото снаружи (если не задано, используется фото из обложки (cover))'
        reloadIfChanged: TRUE
        inspector:
          group: 'news'
    type:
      type: string
      defaultValue: 'ourNews'
      ui:
        label: 'Тип новости'
        inspector:
          group: newsRelations
          editor: 'TYPO3.Neos/Inspector/Editors/SelectBoxEditor'
          editorOptions:
            values:
              ourNews:
                label: 'Наша новость (в потоке)'
                icon: 'icon-legal'
              externalNews:
                label: 'Обзор СМИ'
                icon: 'icon-fire'
              announcement:
                label: 'Анонс'
              blog:
                label: 'Пишут в блогах'
      search:
        elasticSearchMapping:
          type: string
          index: not_analyzed
    tags:
      type: references
      ui:
        label: 'Тэги (Энциклопедия)'
        reloadIfChanged: true
        inspector:
          group: newsRelations
          editorOptions:
            nodeTypes:
              - 'Sfi.Site:Tag'
    sections:
      type: references
      ui:
        label: 'Направления служения'
        reloadIfChanged: true
        inspector:
          group: newsRelations
          editorOptions:
            nodeTypes:
              - 'Sfi.Site:Tag'
            startingPoint: '/sites/site/pages/node-575b9aad625a1/node-575b9aad769f1'
            threshold: 1
    collections:
      type: references
      ui:
        label: 'Интересные темы'
        reloadIfChanged: true
        inspector:
          group: newsRelations
          editorOptions:
            nodeTypes:
              - 'Sfi.Site:Tag'
    events:
      type: references
      ui:
        label: 'Конференции/Выставки/Фестивали'
        reloadIfChanged: true
        inspector:
          group: newsRelations
          editorOptions:
            nodeTypes:
              - 'Sfi.Site:Tag'

    relatedNews:
      type: references
      ui:
        label: 'Связанные новости'
        reloadIfChanged: true
        inspector:
          group: newsRelations
          editorOptions:
            nodeTypes:
              - 'Sfi.Site:News'

    originalIdentifier:
      type: string














'Sfi.Site:Epigraph':
  superTypes:
    'TYPO3.Neos:Content': true
  ui:
    label: 'Эпиграф'
  properties:
    text:
      type: string

'Sfi.YouTube:YouTube':
  superTypes:
    'TYPO3.Neos:Content': true
  ui:
    label: 'YouTube'
    inspector:
      groups:
        image:
          label: 'YouTube'
  properties:
    caption:
      type: string
    videoUrl:
      type: string
      ui:
        reloadIfChanged: TRUE
        inspector:
          group: image
